{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/analytics.js","webpack://exports/./src/create-color-with-swatch.js","webpack://exports/./src/get-matching-swatch.js","webpack://exports/./src/import-swatch-from-library.js","webpack://exports/./src/inspect-selection.js","webpack://exports/./src/main-view.js","webpack://exports/./src/map-library-swatches.js","webpack://exports/./src/map-shared-styles.js","webpack://exports/./src/map-symbols-and-styles.js","webpack://exports/./src/replace-overrides.js","webpack://exports/./src/replace-selected-overrides.js","webpack://exports/./src/replace-selected-shared-styles.js","webpack://exports/./src/replace-selected-swatches.js","webpack://exports/./src/replace-selected-symbol-swatches.js","webpack://exports/./src/replace-selected-symbols.js","webpack://exports/./src/replace-shared-styles.js","webpack://exports/./src/replace-swatches.js","webpack://exports/./src/replace-symbols.js","webpack://exports/./src/script.js","webpack://exports/./src/switch-library.js","webpack://exports/./src/switch-selection.js","webpack://exports/./src/ui/create-button.js","webpack://exports/./src/ui/create-divider.js","webpack://exports/./src/ui/create-floating-panel.js","webpack://exports/./src/ui/create-help-button.js","webpack://exports/./src/ui/create-image.js","webpack://exports/./src/ui/create-library-preview.js","webpack://exports/./src/ui/create-radio-buttons.js","webpack://exports/./src/ui/create-scroll-view.js","webpack://exports/./src/ui/create-text.js","webpack://exports/./src/ui/create-view.js","webpack://exports/./src/ui/styles.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/settings\""],"names":["googleAnalytics","context","category","action","label","value","trackingID","uuidKey","url","uuid","NSUserDefaults","standardUserDefaults","objectForKey","NSUUID","UUID","UUIDString","setObject_forKey","MSApplicationMetadata","metadata","appVersion","encodeURI","plugin","name","version","session","NSURLSession","sharedSession","task","dataTaskWithURL","NSURL","URLWithString","NSString","stringWithString","resume","newSwatch","newColor","MSColor","blackColor","setSwatch","localSwatch","swatchID","doc","librarySwatches","currentSwatch","swatchWithID","String","matchingSwatch","nativeLibrary","MSForeignSwatch","alloc","initWithOriginalObject_inLibrary","addNewSwatch","document","documentData","addForeignSwatch","inspectSelection","layers","lookup","documentSymbols","documentLayerStyles","documentTextStyles","forEach","layer","sharedStyleId","replaceSelectedSharedStyles","text","undefined","type","replaceSelectedSymbols","symbol","documentsymbol","overrides","property","replaceSelectedOverrides","panelStyles","theme","libraries","lastSelected","settings","sessionVariable","panelContent","createView","NSMakeRect","panelWidth","panelHeight","panelHeader","swapType","createRadioButtons","themesTitle","createText","blackText","whiteText","sectionFont","optionsTitle","scrollViewMask","createImage","libraryList","createScrollView","addComponentsToPanel","i","addSubview","itemContent","itemWidth","itemHeight","length","count","library","lib","sketchObject","nativeLibraryLayers","pages","listItem","imageMask","imageArea","createLibraryPreview","artboardSubtitle","darkTextGrey","lightTextGrey","subtitleFont","libraryType","rightColX","rightColWidth","artboardTitle","titleFont","divider","createDivider","button","NSButton","initWithFrame","setTitle","setBezelStyle","NSRoundedBezelStyle","setAction","setCOSJSTargetFunction","nativeDocSwatches","mapLibrarySwatches","selectedCell","tag","setSessionVariable","selectedLayers","sketch","UI","message","switchSelection","replaceSelectedSwatches","selectedPages","switchLibrary","addComponentsToList","setDocumentView","createLookupName","swatches","reduce","prev","s","lookups","libraryColorVariables","allSwatches","createLookup","styles","getImportableLayerStyleReferencesForDocument","getImportableTextStyleReferencesForDocument","createIdLookup","symbolId","getImportableSymbolReferencesForDocument","getSymbols","docSymbolInstances","symbolsMap","layerStylesMap","textStylesMap","symbolInstance","override","overrideValue","documentStyles","libraryStyles","key","style","styleToImport","imported","import","importedId","libraryLayerStyles","libraryTextStyles","id","importedStyle","importedStyleId","syncWithSharedStyle","docLayers","nativeLayer","class","textStyle","encodedAttributes","MSAttributedStringColorAttribute","getMatchingSwatch","importSwatchFromLibrary","createColorWithSwatch","setTextColor","fills","fill","color","borders","border","jsSymbolMaster","master","jsOverride","replaceSelectedSymbolSwatches","jsLayer","currentValue","fromNative","isDefault","currentSwatchID","match","jsLib","getLibrary","nativeLibFromSymbol","overridePoint","console","log","pe","allSymbols","p","l","le","we","m","setValue_forOverridePoint","selectedSymbols","librarySymbols","symbolMasterName","symbolToImport","map","librarySharedStyle","currentSharedStyle","getAllInstancesLayers","getAllInstances","docData","docSwatches","swatch","importableSwatch","find","sw","replaceInstancesOfColor_withColor_ignoreAlphaWhenMatching_replaceAlphaOfOriginalColor","makeReferencingColor","referencingColor","docSymbols","symbolMaster","instances","concat","matchingSymbolInLib","importedSymbolMaster","parent","getTheme","librariesArray","getLibraries","filter","valid","enabled","sort","a","b","toLowerCase","pluginName","__command","pluginBundle","getSelectedDocument","mainView","fiber","Async","createFiber","panel","createFloatingPanel","panelClose","standardWindowButton","NSWindowCloseButton","close","cleanup","contentView","mapSharedStyles","getImportableSwatchReferencesForDocument","replaceSymbols","replaceSharedStyles","getSharedLayerStyles","getSharedTextStyles","replaceOverrides","reloadInspector","selection","mapSymbolsAndStyles","createButton","frame","NSView","setWantsLayer","setBackgroundColor","NSColor","colorWithCalibratedRed_green_blue_alpha","CGColorCreateGenericRGB","title","NSPanel","init","setFrame_display","setStyleMask","NSTexturedBackgroundWindowMask","NSTitledWindowMask","NSClosableWindowMask","NSFullSizeContentViewWindowMask","setLevel","NSFloatingWindowLevel","NSWindowMiniaturizeButton","setHidden","NSWindowZoomButton","makeKeyAndOrderFront","center","createHelpButton","NSHelpButtonBezelStyle","imagePath","imagePathDark","image","NSImageView","mask","NSImage","initByReferencingFile","urlForResourceNamed","path","setImage","setImageScaling","getLibraryPreview","source","artboardGroups","NSMutableArray","array","page","predicate","NSPredicate","predicateWithFormat","children","filteredArrayUsingPredicate","instance","addObject","libraryPreviewLayer","exportRequest","MSExportRequest","exportRequestsFromExportableLayer_inRect_useIDForName_","absoluteInfluenceRect","firstObject","format","colorSpace","NSColorSpace","sRGBColorSpace","exporter","MSExporter","exporterForRequest_colorSpace_","imageRep","bitmapImageRep","libraryPreviewImage","autorelease","addRepresentation","options","selected","x","y","rows","columns","buttonMatrixWidth","buttonCellWidth","buttonCell","NSButtonCell","setButtonType","NSRadioButton","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSRadioModeMatrix","setCellSize","NSMakeSize","cells","objectAtIndex","setTag","selectCellAtRow_column","view","NSScrollView","setHasVerticalScroller","colorDark","font","string","field","NSTextField","setStringValue","setFont","setBezeled","setEditable","setDrawsBackground","setLineBreakMode","NSLineBreakByTruncatingTail","setFlipped","panelGutter","leftColWidth","rightColPad","NSFont","boldSystemFontOfSize","systemFontOfSize"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","export default function googleAnalytics(\n  context,\n  category,\n  action,\n  label,\n  value\n) {\n  const trackingID = 'UA-128191866-1'\n  const uuidKey = 'google.analytics.uuid'\n  let url = 'https://www.google-analytics.com/collect?v=1'\n  let uuid = NSUserDefaults.standardUserDefaults().objectForKey(uuidKey)\n\n  if (!uuid) {\n    uuid = NSUUID.UUID().UUIDString()\n    NSUserDefaults.standardUserDefaults().setObject_forKey(uuid, uuidKey)\n  }\n\n  // Tracking ID\n  url += `&tid=${trackingID}`\n  // Source\n  url += `&ds=sketch${MSApplicationMetadata.metadata().appVersion}`\n  // Client ID\n  url += `&cid=${uuid}`\n  // pageview, screenview, event, transaction, item, social, exception, timing\n  url += '&t=event'\n  // App Name\n  url += `&an=${encodeURI(context.plugin.name())}`\n  // App Version\n  url += `&av=${context.plugin.version()}`\n  // Event category\n  url += `&ec=${encodeURI(category)}`\n  // Event action\n  url += `&ea=${encodeURI(action)}`\n  // Event label\n  if (label) {\n    url += `&el=${encodeURI(label)}`\n  }\n  // Event value\n  if (value) {\n    url += `&ev=${encodeURI(value)}`\n  }\n\n  const session = NSURLSession.sharedSession();\n    const task = session.dataTaskWithURL(\n      NSURL.URLWithString(NSString.stringWithString(url))\n    )\n  task.resume()\n}\n","export default function(newSwatch) {\n\tlet newColor = MSColor.blackColor()\n\tnewColor.setSwatch(newSwatch.localSwatch())\n\treturn newColor\n}","export default function(swatchID, doc, librarySwatches) {\n\tlet currentSwatch = doc.swatchWithID(String(swatchID))\n\tif(currentSwatch === null){\n\t\treturn\n\t} else {\n\t\tlet newSwatch = librarySwatches[currentSwatch.name()]\n\t\tif(newSwatch) {\n\t\t\treturn newSwatch\n\t\t} \n\t}\n}\n","export default function(matchingSwatch, nativeLibrary) {\n\tlet newSwatch = MSForeignSwatch.alloc().initWithOriginalObject_inLibrary(matchingSwatch, nativeLibrary)\n\tlet addNewSwatch = context.document.documentData().addForeignSwatch(newSwatch)\n\treturn newSwatch\n}","import replaceSelectedSharedStyles from './replace-selected-shared-styles'\nimport replaceSelectedSymbols from './replace-selected-symbols'\nimport replaceSelectedOverrides from './replace-selected-overrides'\n\nexport default function inspectSelection(\n  layers,\n  lookup,\n  documentSymbols,\n  documentLayerStyles,\n  documentTextStyles\n) {\n  layers.forEach((layer) => {\n  if (layer.sharedStyleId != null) {\n      replaceSelectedSharedStyles(\n        layer,\n        layer.sharedStyleId,\n        documentLayerStyles,\n        lookup.layer,\n        documentTextStyles,\n        lookup.text\n      )\n    } else {\n      if (layer.layers !== undefined) {\n        inspectSelection(\n          layer.layers,\n          lookup,\n          documentSymbols,\n          documentLayerStyles,\n          documentTextStyles\n        )\n      }\n      if (layer.layers === undefined) {\n        if (layer.type === 'SymbolInstance') {\n          replaceSelectedSymbols(layer, lookup.symbol, lookup.documentsymbol)\n        }\n        if (layer.overrides !== undefined) {\n          layer.overrides.forEach((overrides) => {\n            if (overrides.property === 'symbolID') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentSymbols,\n                lookup.symbol,\n                'symbolId'\n              )\n            }\n            if (overrides.property === 'layerStyle') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentLayerStyles,\n                lookup.layer,\n                'id'\n              )\n            }\n            if (overrides.property === 'textStyle') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentTextStyles,\n                lookup.text,\n                'id'\n              )\n            }\n          })\n        } else if (layer.sharedStyleId !== null) {\n            replaceSelectedSharedStyles(\n              layer,\n              layer.sharedStyleId,\n              documentLayerStyles,\n              lookup.layer,\n              documentTextStyles,\n              lookup.text\n            )\n          }\n      }\n    }\n  })\n}\n","import sketch from 'sketch'\nimport settings from 'sketch/settings'\nimport googleAnalytics from './analytics'\nimport switchLibrary from './switch-library'\nimport switchSelection from './switch-selection'\nimport createFloatingPanel from './ui/create-floating-panel'\nimport createScrollView from './ui/create-scroll-view'\nimport createView from './ui/create-view'\nimport createButton from './ui/create-button'\nimport createImage from './ui/create-image'\nimport createHelpButton from './ui/create-help-button'\nimport createText from './ui/create-text'\nimport createDivider from './ui/create-divider'\nimport createLibraryPreview from './ui/create-library-preview'\nimport createRadioButtons from './ui/create-radio-buttons'\nimport replaceSelectedSwatches from './replace-selected-swatches'\nimport mapLibrarySwatches from './map-library-swatches'\n\n\nexport default function(context,panelStyles, theme, doc, libraries) {\n\n  //Settings\n  let lastSelected = settings.sessionVariable('Selected')\n\n  let panelContent = createView(NSMakeRect(0,0,panelStyles.panelWidth,panelStyles.panelHeight - panelStyles.panelHeader))\n  let swapType = createRadioButtons(\n    ['Apply to selection', 'Apply to document'],\n    lastSelected\n  )\n  \n  let themesTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.sectionFont,'Libraries',NSMakeRect(20,40,100,18))\n  let optionsTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.sectionFont,'Options',NSMakeRect(20,334,100,18))\n  let scrollViewMask = createImage(theme,NSMakeRect(20,75,338,239),'scrollViewMask.png','scrollViewMaskDark.png')\n  let libraryList = createScrollView(theme,NSMakeRect(20,75,338,239))\n  \n  let addComponentsToPanel = [themesTitle,optionsTitle,swapType,libraryList,scrollViewMask].forEach(i => panelContent.addSubview(i))\n  let itemContent = createView(NSMakeRect(0,0,panelStyles.itemWidth,panelStyles.itemHeight * libraries.length))\n  let count = 0\n  \n  libraries.forEach(function(library,i){\n    let lib = library\n    let nativeLibrary = lib.sketchObject\n    let nativeLibraryLayers = library.sketchObject.document().documentData().pages()\n    let listItem = createView(NSMakeRect(0,panelStyles.itemHeight*count,panelStyles.itemWidth,panelStyles.itemHeight))\n    let imageMask = createImage(theme,NSMakeRect(20,15,40,40),'mask.png','maskDark.png')\n    let imageArea = createLibraryPreview(theme,nativeLibraryLayers,NSMakeRect(20,15,40,40))\n    let artboardSubtitle = createText(theme,panelStyles.darkTextGrey,panelStyles.lightTextGrey,panelStyles.subtitleFont,String(library.libraryType),NSMakeRect(panelStyles.rightColX,38,panelStyles.rightColWidth-88,14))\n    let artboardTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.titleFont,String(library.name),NSMakeRect(panelStyles.rightColX,20,panelStyles.rightColWidth-88,18))\n    let divider = createDivider(theme,NSMakeRect(20,panelStyles.itemHeight - 1,panelStyles.itemWidth - 40,0.5))\n\n    let button = NSButton.alloc().initWithFrame(NSMakeRect(237,18,88,36)) \n    button.setTitle('Swap')\n    button.setBezelStyle(NSRoundedBezelStyle)\n    button.setAction('callAction:')\n\n    button.setCOSJSTargetFunction(function() {\n    let nativeDocSwatches = mapLibrarySwatches(nativeLibrary.document().documentData())     \n\n      if (swapType.selectedCell().tag() === 0) {\n        settings.setSessionVariable('Selected', 0)\n        let selectedLayers = doc.selectedLayers\n        \n        \n        if (selectedLayers.length < 1) {\n          sketch.UI.message(`Select a layer`)\n        } else {    \n          \n          switchSelection(doc, lib)\n          replaceSelectedSwatches(selectedLayers, nativeDocSwatches, nativeLibrary)          \n          googleAnalytics(context, 'Replace selected with', lib.name, 'Library')\n          sketch.UI.message(`    Applied theme from ${lib.name}    `)\n        }\n      }\n\n      if (swapType.selectedCell().tag() === 1) {\n        settings.setSessionVariable('Selected', 1)\n        let selectedPages = doc.pages\n        switchLibrary(doc, lib)\n        replaceSelectedSwatches(selectedPages, nativeDocSwatches, nativeLibrary)          \n        googleAnalytics(context, 'Replace document with', lib.name, 'Library')\n        sketch.UI.message(`    Applied theme from ${lib.name}    `)     \n      }\n    })\n    \n    let addComponentsToList = [imageArea,imageMask,artboardSubtitle,artboardTitle,button,divider].forEach(i => listItem.addSubview(i))\n    \n    itemContent.addSubview(listItem)\n\n    count++\n  })\n\n  libraryList.setDocumentView(itemContent)\n\n  return panelContent\n}","export function createLookupName(swatches) {\n  return swatches.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.name()] = s\n    return prev\n  }, {})\n}\n\nexport default function(nativeLibrary) {\n\tlet lookups = {\n  \tlibraryColorVariables: createLookupName(nativeLibrary.allSwatches())\n\t}\n  return lookups\n}","export function createLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.name] = s\n    return prev\n  }, {})\n}\n\nexport default (document, library) => ({\n  layer: createLookup(\n    library.getImportableLayerStyleReferencesForDocument(document)\n  ),\n  text: createLookup(\n    library.getImportableTextStyleReferencesForDocument(document)\n  ),\n})\n","export function createIdLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.symbolId] = s\n    return prev\n  }, {})\n}\n\nexport function createLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.name] = s\n    return prev\n  }, {})\n}\n\nexport default (document, library) => ({\n  layer: createLookup(\n    library.getImportableLayerStyleReferencesForDocument(document)\n  ),\n  text: createLookup(\n    library.getImportableTextStyleReferencesForDocument(document)\n  ),\n  symbol: createLookup(\n    library.getImportableSymbolReferencesForDocument(document)\n  ),\n  documentsymbol: createIdLookup(document.getSymbols()),\n})\n","export default (\n  docSymbolInstances,\n  { symbolsMap, layerStylesMap, textStylesMap }\n) => {\n  docSymbolInstances.forEach(symbolInstance => {\n    symbolInstance.overrides.forEach(override => {\n      if (override.property === 'symbolID' && symbolsMap[override.value]) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = symbolsMap[override.value]\n      }\n      if (\n        override.property === 'layerStyle' &&\n        layerStylesMap[override.value]\n      ) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = layerStylesMap[override.value]\n      }\n      if (override.property === 'textStyle' && textStylesMap[override.value]) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = textStylesMap[override.value]\n      }\n    })\n  })\n}\n","export default function(\n  overrideValue,\n  overrides,\n  documentStyles,\n  libraryStyles,\n  key\n) {\n  documentStyles.forEach((style) => {\n    if (style[key] === overrideValue) {\n      const styleToImport = libraryStyles[style.name]\n      if (styleToImport) {\n        const imported = styleToImport.import()\n        const importedId = imported[key]\n        overrides.value = importedId\n      }\n    }\n  })\n}\n","export default function(\n  layer,\n  sharedStyleId,\n  documentLayerStyles,\n  libraryLayerStyles,\n  documentTextStyles,\n  libraryTextStyles\n) {\n  documentLayerStyles.forEach((style) => {\n    if (style.id === sharedStyleId) {\n      const styleToImport = libraryLayerStyles[style.name]\n\n      if (styleToImport) {\n        const importedStyle = styleToImport.import()\n        const importedStyleId = importedStyle.id\n        layer.sharedStyleId = importedStyleId\n        layer.style.syncWithSharedStyle(importedStyle)\n      }\n    }\n  })\n  documentTextStyles.forEach((style) => {\n    if (style.id === sharedStyleId) {\n      const styleToImport = libraryTextStyles[style.name]\n\n      if (styleToImport) {\n        const importedStyle = styleToImport.import()\n        const importedStyleId = importedStyle.id\n        layer.sharedStyleId = importedStyleId\n        layer.style.syncWithSharedStyle(importedStyle)\n      }\n    }\n  })\n}\n","import sketch from 'sketch'\nimport replaceSelectedSwatches from './replace-selected-swatches'\nimport getMatchingSwatch from './get-matching-swatch'\nimport importSwatchFromLibrary from './import-swatch-from-library'\nimport createColorWithSwatch from './create-color-with-swatch'\nimport replaceSelectedSymbolSwatches from './replace-selected-symbol-swatches'\n\nexport default function(docLayers, nativeDocSwatches, nativeLibrary) {\n\tdocLayers.forEach((layer) => {\n\t\tlet nativeLayer = layer.sketchObject\n\t\tswitch(String(nativeLayer.class())) {\n\t\t\tcase \"MSTextLayer\":\n\t\t\t\tif(String(nativeLayer.style().textStyle().encodedAttributes().MSAttributedStringColorAttribute.swatchID()) != 'null'){\n\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(nativeLayer.style().textStyle().encodedAttributes().MSAttributedStringColorAttribute.swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\tlet newColor = createColorWithSwatch(newSwatch)\n\t\t\t\t\tnativeLayer.setTextColor(newColor);\n\t\t\t\t}\n\t\t\t\tif(nativeLayer.style().fills().length>0) {\n\t\t\t\t\tnativeLayer.style().fills().forEach(function(fill){\n\t\t\t\t\t\tif(String(fill.color().swatchID()) != 'null'){\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(fill.color().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tfill.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(nativeLayer.style().borders().length>0) {\n\t\t\t\t\tnativeLayer.style().borders().forEach(function(border){\n\t\t\t\t\t\tif(String(border.color().swatchID()) != 'null'){\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(border.color().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tborder.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"MSSymbolInstance\":\n\t\t\t\t// let jsLayer = sketch.fromNative(nativeLayer)\n        let jsSymbolMaster = layer.master\n        if(jsSymbolMaster.overrides.length>0){\n          jsSymbolMaster.overrides.forEach(function(jsOverride){\n          \treplaceSelectedSymbolSwatches(jsOverride,nativeLayer, layer, jsSymbolMaster, nativeDocSwatches, nativeLibrary)\n        \t})\n        }\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif(nativeLayer.style().fills().length>0) {\n\t\t\t\t\tnativeLayer.style().fills().forEach(function(fill){\n\t\t\t\t\t\tif(String(fill.color().swatchID()) != 'null'){\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(fill.color().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tfill.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif(nativeLayer.style().borders().length>0) {\n\t\t\t\t\tnativeLayer.style().borders().forEach(function(border){\n\t\t\t\t\t\tif(String(border.color().swatchID()) != 'null'){\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(border.color().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tborder.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\t// Iterate through layers array\n\t\tif(typeof nativeLayer.layers === 'function') {\n    \treplaceSelectedSwatches(layer.layers, nativeDocSwatches, nativeLibrary)\n  \t}\n\t})\n}","import sketch from 'sketch'\nimport getMatchingSwatch from './get-matching-swatch'\nimport importSwatchFromLibrary from './import-swatch-from-library'\nimport createColorWithSwatch from './create-color-with-swatch'\nimport replaceSelectedSymbolSwatches from './replace-selected-symbol-swatches'\n\nexport default function(jsOverride,nativeLayer, jsLayer, jsSymbolMaster,nativeDocSwatches, nativeLibrary){\n  \n  let override = jsOverride.sketchObject\n\n  if(String(override.currentValue().class()) == 'MSColor' || String(override.currentValue().class()) == 'MSImmutableColor'){\n    let jsOverride = sketch.fromNative(override)\n    if(jsOverride.isDefault){\n      let currentSwatchID = override.currentValue().swatchID()\n      // If there is a swatc with same ID in current document\n      let match = context.document.documentData().swatchWithID(String(currentSwatchID))\n      if(match == null){    \n      \n        let jsLib = jsSymbolMaster.getLibrary()\n        let nativeLibFromSymbol = jsLib.sketchObject\n        let overrideValue = override.overridePoint()\n        let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), nativeLibFromSymbol.document().documentData(), nativeDocSwatches.libraryColorVariables)\n        \n        if (matchingSwatch === undefined){\n\n          console.log('caso nested')\n          \n          let pe = nativeLibFromSymbol.document().documentData().allSymbols()\n          \n          pe.forEach(function(p){\n            if(sketch.fromNative(p).getLibrary() != null){\n              let l = sketch.fromNative(p).getLibrary()\n              let le = l.sketchObject\n              let we = sketch.fromNative(p)\n              \n              we.overrides.forEach(function(m){\n                if(String(m.sketchObject.currentValue().class()) == 'MSColor' || String(m.sketchObject.currentValue().class()) == 'MSImmutableColor'){\n                  \n                  let matchingSwatch = getMatchingSwatch(m.sketchObject.currentValue().swatchID(), le.document().documentData(), nativeDocSwatches.libraryColorVariables)\n                  if (matchingSwatch === undefined){\n                    console.log('meganested')\n                    \n                    replaceSelectedSymbolSwatches(jsOverride,nativeLayer, jsLayer, we,nativeDocSwatches, le)\n                  } else {\n                    console.log(matchingSwatch)\n                    let newSwatch = importSwatchFromLibrary(matchingSwatch, le)\n                    let newColor = createColorWithSwatch(newSwatch)\n                    nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n                    console.log(jsLayer.name, newColor, overrideValue,newSwatch)\n                    console.log('cambiado nested!!')\n                  }\n                }\n              })\n            }\n          })\n\n        }else{ \n        let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n        let newColor = createColorWithSwatch(newSwatch)\n        nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n        }\n      } else {\n        let overrideValue = override.overridePoint()\n        let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n        let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n        let newColor = createColorWithSwatch(newSwatch)\n        nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n      }\n    } else {      \n      let overrideValue = override.overridePoint()\n      let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), context.document.documentData(), nativeDocSwatches.libraryColorVariables)\n      let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n      let newColor = createColorWithSwatch(newSwatch)\n      nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n    }\n  }\n}","export default function(selectedSymbols, librarySymbols, documentSymbols) {\n  const symbolMasterName = documentSymbols[selectedSymbols.symbolId]\n\n  if (symbolMasterName) {\n    const symbolToImport = librarySymbols[symbolMasterName.name]\n    if (symbolToImport) {\n      const imported = symbolToImport.import()\n      selectedSymbols.symbolId = imported.symbolId\n      selectedSymbols.name = imported.name\n    }\n  }\n}\n","export default function(libraryStyles, lookup, library) {\n  const map = {}\n  libraryStyles.forEach(librarySharedStyle => {\n    const currentSharedStyle = lookup[librarySharedStyle.name]\n    if (currentSharedStyle) {\n      const imported = currentSharedStyle.import()\n      // if the shared style is coming from a library, then we just want to:\n      // - import the matching style\n      // - update all the instances to point to the imported style\n      // - map the current style to the imported one\n      if (librarySharedStyle.getLibrary()) {\n        map[librarySharedStyle.id] = imported.id\n        librarySharedStyle.getAllInstancesLayers().forEach(l => {\n          // eslint-disable-next-line no-param-reassign\n          l.sharedStyleId = imported.id\n          l.style.syncWithSharedStyle(imported)\n        })\n      } else {\n        // if the shared style is local, then we just want to:\n        // - import the matching style to update the local one\n        // - update all the instances to point to the imported style\n        librarySharedStyle.style = imported.style\n        librarySharedStyle\n          .getAllInstances()\n          .forEach(s => s.syncWithSharedStyle(librarySharedStyle))\n      }\n    }\n  })\n  return map\n}\n","export default function(docData,librarySwatches,docSwatches) {\n  docSwatches.forEach(swatch => {\n    let importableSwatch = librarySwatches.find(sw => sw.name == swatch.name())\n    if (!importableSwatch) {\n      return\n    } else {\n      let newSwatch = importableSwatch.import()\n      docData\n            .replaceInstancesOfColor_withColor_ignoreAlphaWhenMatching_replaceAlphaOfOriginalColor(\n            swatch.makeReferencingColor(),\n            newSwatch.referencingColor,\n            false,\n            false)\n    }\n  })\n}","export default function(document, library) {\n  const docSymbols = document.getSymbols()\n  let docSymbolInstances = []\n  const symbolsMap = {}\n\n  if (!docSymbols.length) {\n    return { symbolsMap, docSymbolInstances }\n  }\n\n  const librarySymbols = library.getImportableSymbolReferencesForDocument(\n    document\n  )\n\n  docSymbols.forEach(symbolMaster => {\n    const instances = symbolMaster.getAllInstances()\n    docSymbolInstances = docSymbolInstances.concat(instances)\n\n    const matchingSymbolInLib = librarySymbols.find(\n      s => s.name === symbolMaster.name\n    )\n    if (!matchingSymbolInLib) {\n      return\n    }\n    // import the matching symbol\n    const importedSymbolMaster = matchingSymbolInLib.import()\n\n    // store the mapping so that we can update the overrides later on\n    symbolsMap[symbolMaster.symbolId] = importedSymbolMaster.symbolId\n\n    // update all the instances\n    instances.forEach(symbolInstance => {\n      // eslint-disable-next-line no-param-reassign\n      symbolInstance.symbolId = importedSymbolMaster.symbolId\n      // eslint-disable-next-line no-param-reassign\n      symbolInstance.name = importedSymbolMaster.name\n    })\n\n    // now that we replaced all the instances, we remove the master\n    // eslint-disable-next-line no-param-reassign\n    symbolMaster.parent = null\n  })\n\n  return { symbolsMap, docSymbolInstances }\n}\n","import sketch from 'sketch'\nimport googleAnalytics from './analytics'\nimport createFloatingPanel from './ui/create-floating-panel'\nimport styles from './ui/styles'\nimport mainView from './main-view'\n\nconst theme = sketch.UI.getTheme()\nconst librariesArray = sketch.getLibraries().filter(l => l.valid && l.enabled)\nconst libraries = librariesArray.sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase()) ? 1 : -1)\nconst pluginName = __command.pluginBundle().name()\nconst doc = sketch.getSelectedDocument()\n\nexport default function(context) {\n\n  let panelStyles = styles()\n  let panelContent = mainView(context,panelStyles,theme,doc,libraries)\n\n  let fiber = sketch.Async.createFiber()\n  let panel = createFloatingPanel(theme,pluginName,NSMakeRect(0,0,panelStyles.panelWidth,panelStyles.panelHeight))\n  let panelClose = panel.standardWindowButton(NSWindowCloseButton)\n  \n  panelClose.setCOSJSTargetFunction(function() {\n    panel.close()\n    fiber.cleanup()\n  })\n\n  panel.contentView().addSubview(panelContent)\n  googleAnalytics(context, 'Open Camilo', 'Alert', 'UI')\n}","import mapSharedStyles from './map-shared-styles'\nimport replaceSymbols from './replace-symbols'\nimport replaceOverrides from './replace-overrides'\nimport replaceSharedStyles from './replace-shared-styles'\nimport replaceSwatches from './replace-swatches'\n\nexport default function(document, library) {\n  const lookup = mapSharedStyles(document, library)\n  const librarySwatches = library.getImportableSwatchReferencesForDocument(document)\n  // review code when API exposes foreignSwatches\n  const docData = document.sketchObject.documentData()\n  const docSwatches = docData.allSwatches() \n\n  // replace the symbols\n  const { symbolsMap, docSymbolInstances } = replaceSymbols(document, library)\n\n  // replace the styles\n  const layerStylesMap = replaceSharedStyles(\n    document.getSharedLayerStyles(),\n    lookup.layer,\n    library\n  )\n  // replace the textStyles\n  const textStylesMap = replaceSharedStyles(\n    document.getSharedTextStyles(),\n    lookup.text,\n    library\n  )\n  // replace the overrides\n  replaceOverrides(docSymbolInstances, {\n    symbolsMap,\n    layerStylesMap,\n    textStylesMap\n  })\n\n  // replace the swatches\n  // replaceSwatches(\n  //   docData,\n  //   librarySwatches,\n  //   docSwatches\n  // )\n\n  // reload the inspector to make sure we show the latest changes\n  document.sketchObject.reloadInspector()\n}\n","import mapSymbolsAndStyles from './map-symbols-and-styles'\nimport inspectSelection from './inspect-selection'\n\nexport default function(document, library) {\n  const selection = document.selectedLayers.layers\n  const lookup = mapSymbolsAndStyles(document, library)\n  const docSymbols = document.getSymbols()\n\n  inspectSelection(\n    selection,\n    lookup,\n    docSymbols,\n    document.getSharedLayerStyles(),\n    document.getSharedTextStyles()\n  )\n\n  // reload the inspector to make sure we show the latest changes\n  document.sketchObject.reloadInspector()\n}\n","export default function createButton(label,frame) {\n\tvar button = NSButton.alloc().initWithFrame(frame)\n\tbutton.setTitle(label)\n\tbutton.setBezelStyle(NSRoundedBezelStyle)\n\tbutton.setAction('callAction:')\n\t\n\treturn button\n}","export default function createDivider(theme,frame) {\n\tvar divider = NSView.alloc().initWithFrame(frame);\n\n\tdivider.setWantsLayer(1);\n\tif (theme === 'dark') {\n  divider.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.22,0.22,0.22,1));\n\t} else {\n  divider.layer().setBackgroundColor(CGColorCreateGenericRGB(204/255,204/255,204/255,1.0));\n\t}\n\t\n\n\treturn divider;\n}","export default function createFloatingPanel(theme,title,frame) {\n\tvar panel = NSPanel.alloc().init();\n\n\tpanel.setTitle(title);\n\tpanel.setFrame_display(frame,true);\n\tpanel.setStyleMask(NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask | NSFullSizeContentViewWindowMask);\n\tif (theme === 'dark') {\n  panel.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.2,0.2,0.2,1));\n\t} else {\n  panel.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,1));\n\t}\n\tpanel.setLevel(NSFloatingWindowLevel);\n\tpanel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n\tpanel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n\tpanel.makeKeyAndOrderFront(null);\n\tpanel.center();\n\n\treturn panel;\n}","export default function createHelpButton(label,frame) {\n\t\n\tvar button = NSButton.alloc().initWithFrame(frame)\n\t\n\tbutton.setTitle(label)\n\tbutton.setBezelStyle(NSHelpButtonBezelStyle)\n\tbutton.setAction('callAction:')\n\t\n\treturn button\n}","export default function createImage(theme,frame,imagePath,imagePathDark) {\n \n  var image = NSImageView.alloc().initWithFrame(frame);\n  \n  if (theme === 'dark') {\n  let mask = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(String(imagePathDark)).path())\n    image.setImage(mask);\n    image.setImageScaling(0)\n\t} else {\n  let mask = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(String(imagePath)).path())\n    image.setImage(mask);\n    image.setImageScaling(0)\n\t}\n  return image\n}\n","import createImage from './create-image'\n\nexport function getLibraryPreview(source) {\n\tvar artboardGroups = NSMutableArray.array();\n\tsource.forEach(function(page){\n\t\tvar predicate = NSPredicate.predicateWithFormat('className == %@ && name == %@', 'MSArtboardGroup' , 'Library Preview');\n\t\tpage.children().filteredArrayUsingPredicate(predicate).forEach(instance => artboardGroups.addObject(instance));\n\t});\n\tif(artboardGroups.length>0){\n\t\treturn artboardGroups[0];\n\t}\n}\n\nexport default function createLibraryPreview(theme,source,frame) {\n\tlet image = NSImageView.alloc().initWithFrame(frame)\n\tlet libraryPreviewLayer = getLibraryPreview(source)\n\t\n\tif(libraryPreviewLayer != undefined || null){\n\t\tlet exportRequest = MSExportRequest.exportRequestsFromExportableLayer_inRect_useIDForName_(\n\t\tlibraryPreviewLayer,\n\t\tlibraryPreviewLayer.absoluteInfluenceRect(),\n\t\tfalse\n\t\t).firstObject();\n\t\t\n\t\texportRequest.format = 'png';\n\n\t\tlet colorSpace = NSColorSpace.sRGBColorSpace();\n\t\tlet exporter = MSExporter.exporterForRequest_colorSpace_(exportRequest,colorSpace);\n\t\tlet imageRep = exporter.bitmapImageRep();\n\t\t\n\t\tlet libraryPreviewImage = NSImage.alloc().init().autorelease();\n\t\tlibraryPreviewImage.addRepresentation(imageRep);\n\t\timage.setImage(libraryPreviewImage);\n\t\timage.setImageScaling(3)\n\t\t\n\t\treturn image;\n\n\t} else {\n\n\t\tlet libraryPreviewImage = createImage(theme,frame,'library.png','library.png');\n\t\treturn libraryPreviewImage;\n\t}\n}\n\n","export default function createRadioButtons(options, selected, format, x = 20, y = 375) {\n  let rows = options.length;\n    let columns = 1;\n    let buttonMatrixWidth = 300;\n    let buttonCellWidth = buttonMatrixWidth;\n\n  if (format && format !== 0) {\n    rows = options.length / 2\n    columns = 2\n    buttonMatrixWidth = 300\n    buttonCellWidth = buttonMatrixWidth / columns\n  }\n\n  const buttonCell = NSButtonCell.alloc().init()\n\n  buttonCell.setButtonType(NSRadioButton)\n\n  const buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(\n    NSMakeRect(x, y, buttonMatrixWidth, rows * 24),\n    NSRadioModeMatrix,\n    buttonCell,\n    rows,\n    columns\n  )\n\n  buttonMatrix.setCellSize(NSMakeSize(buttonCellWidth, 24))\n\n  let i = 0\n\n  for (i = 0; i < options.length; i +=1 ) {\n    buttonMatrix\n      .cells()\n      .objectAtIndex(i)\n      .setTitle(options[i])\n    buttonMatrix\n      .cells()\n      .objectAtIndex(i)\n      .setTag(i)\n  }\n\n  buttonMatrix.selectCellAtRow_column(selected, 0)\n\n  return buttonMatrix\n}\n","export default function createScrollView(theme,frame) {\n\tvar view = NSScrollView.alloc().initWithFrame(frame)\n\tif (theme === 'dark') {\n  view.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.17,0.17,0.17,1))\n\t} else {\n  view.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.95,0.95,0.95,1))\n\t}\n\t\n\tview.setHasVerticalScroller(1)\n\t\n\treturn view\n}\n","export default function createText(theme,color,colorDark,font,string,frame) {\n\t\n\tvar field = NSTextField.alloc().initWithFrame(frame)\n\n\tfield.setStringValue(string)\n\tfield.setFont(font)\n\tfield.setBezeled(0)\n\tfield.setEditable(0)\n\tfield.setDrawsBackground(false)\n\tfield.setLineBreakMode(NSLineBreakByTruncatingTail);\n\n\t//Themes colors\n\tif (theme === 'dark') {\n  field.setTextColor(colorDark)\n\t} else {\n  field.setTextColor(color)\n\t}\n\n\treturn field\n}","export default function createView(frame) {\n\tvar view = NSView.alloc().initWithFrame(frame);\n\t\n\n\tview.setFlipped(1);\n\n\treturn view;\n}","export default function styles() {\n\tlet styles = {\n\n\t\t// Panel dimens\n\t\tpanelHeader: 20,\n\t\tpanelHeight: 468,\n\t\tpanelWidth: 378,\n\t\tpanelGutter: 15,\n\n\t\t// List\n\t\titemHeight: 72,\n\t\titemWidth: 338,\n\t\tleftColWidth: 60,\n\t\trightColPad: 8,\n\t\trightColWidth: 270, //itemWidth - leftColWidth - rightColPad\n\t\trightColX: 68, //rightColPad + leftColWidth\n\n\t\t// Fonts\n\t\tsectionFont: NSFont.boldSystemFontOfSize(15),\n\t\ttitleFont: NSFont.boldSystemFontOfSize(12),\n\t\tsubtitleFont: NSFont.systemFontOfSize(10),\n\n\t\t//Colors\n\t\tdarkTextGrey: NSColor.colorWithCalibratedRed_green_blue_alpha(0,0,0,0.4),\n\t\tlightTextGrey: NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,0.4),\n\t\tblackText: NSColor.colorWithCalibratedRed_green_blue_alpha(0,0,0,1),\n\t\twhiteText: NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,1),\n\t}\n\n\treturn styles\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/settings\");"],"sourceRoot":""}