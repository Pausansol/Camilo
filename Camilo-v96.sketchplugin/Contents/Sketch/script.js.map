{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/analytics.js","webpack://exports/./src/create-color-with-swatch.js","webpack://exports/./src/get-matching-swatch.js","webpack://exports/./src/import-swatch-from-library.js","webpack://exports/./src/inspect-selection.js","webpack://exports/./src/main-view.js","webpack://exports/./src/map-shared-styles.js","webpack://exports/./src/map-symbols-and-styles.js","webpack://exports/./src/replace-overrides.js","webpack://exports/./src/replace-selected-overrides.js","webpack://exports/./src/replace-selected-shared-styles.js","webpack://exports/./src/replace-selected-swatches.js","webpack://exports/./src/replace-selected-symbol-swatches.js","webpack://exports/./src/replace-selected-symbols.js","webpack://exports/./src/replace-shared-styles.js","webpack://exports/./src/replace-swatches.js","webpack://exports/./src/replace-symbols.js","webpack://exports/./src/script.js","webpack://exports/./src/switch-library.js","webpack://exports/./src/switch-selection.js","webpack://exports/./src/ui/create-button.js","webpack://exports/./src/ui/create-divider.js","webpack://exports/./src/ui/create-floating-panel.js","webpack://exports/./src/ui/create-help-button.js","webpack://exports/./src/ui/create-image.js","webpack://exports/./src/ui/create-library-preview.js","webpack://exports/./src/ui/create-radio-buttons.js","webpack://exports/./src/ui/create-scroll-view.js","webpack://exports/./src/ui/create-text.js","webpack://exports/./src/ui/create-view.js","webpack://exports/./src/ui/styles.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"util\""],"names":["googleAnalytics","context","category","action","label","value","trackingID","uuidKey","url","uuid","NSUserDefaults","standardUserDefaults","objectForKey","NSUUID","UUID","UUIDString","setObject_forKey","concat","BCSketchInfo","shared","metadata","appVersion","encodeURI","plugin","name","version","session","NSURLSession","sharedSession","task","dataTaskWithURL","NSURL","URLWithString","NSString","stringWithString","resume","newSwatch","newColor","MSColor","blackColor","setSwatch","localSwatch","swatchID","doc","librarySwatches","currentSwatch","swatchWithID","String","find","swatch","matchingSwatch","nativeLibrary","MSForeignSwatch","alloc","initWithOriginalObject_inLibrary","inspectSelection","layers","lookup","documentSymbols","documentLayerStyles","documentTextStyles","forEach","layer","sharedStyleId","replaceSelectedSharedStyles","text","undefined","type","replaceSelectedSymbols","symbol","documentsymbol","overrides","property","replaceSelectedOverrides","panelStyles","theme","libraries","lastSelected","settings","sessionVariable","panelContent","createView","NSMakeRect","panelWidth","panelHeight","panelHeader","swapType","createRadioButtons","themesTitle","createText","blackText","whiteText","sectionFont","optionsTitle","scrollViewMask","createImage","libraryList","createScrollView","addComponentsToPanel","i","addSubview","itemContent","itemWidth","itemHeight","length","count","library","lib","sketchObject","nativeLibraryLayers","document","documentData","pages","listItem","imageMask","imageArea","createLibraryPreview","artboardSubtitle","darkTextGrey","lightTextGrey","subtitleFont","libraryType","rightColX","rightColWidth","artboardTitle","titleFont","divider","createDivider","librariesController","AppController","sharedInstance","button","NSButton","initWithFrame","setTitle","setBezelStyle","NSRoundedBezelStyle","setAction","setCOSJSTargetFunction","sketch","getSelectedDocument","nativeLibSwatches","allSwatches","selectedCell","tag","setSessionVariable","selectedLayers","UI","message","switchSelection","replaceSelectedSwatches","selectedPages","switchLibrary","addComponentsToList","setDocumentView","createLookup","styles","reduce","prev","s","getImportableLayerStyleReferencesForDocument","getImportableTextStyleReferencesForDocument","createIdLookup","symbolId","getImportableSymbolReferencesForDocument","getSymbols","docSymbolInstances","_ref","symbolsMap","layerStylesMap","textStylesMap","symbolInstance","override","overrideValue","documentStyles","libraryStyles","key","style","styleToImport","imported","import","importedId","libraryLayerStyles","libraryTextStyles","id","importedStyle","importedStyleId","syncWithSharedStyle","docLayers","nativeLayer","class","textStyle","encodedAttributes","MSAttributedStringColorAttribute","getMatchingSwatch","importSwatchFromLibrary","createColorWithSwatch","setTextColor","fills","fill","color","borders","border","symbolMaster","toArray","overridePoints","replaceSelectedSymbolSwatches","hasOverride","currentSwatchID","currentValue","match","nativeLibFromSymbol","libraryForShareableObject","overridePoint","pe","allSymbols","p","le","MSAvailableOverride","flattenAvailableOverrides","availableOverrides","m","setValue_forOverridePoint","selectedSymbols","librarySymbols","symbolMasterName","symbolToImport","map","librarySharedStyle","currentSharedStyle","getLibrary","getAllInstancesLayers","l","getAllInstances","docData","docSwatches","importableSwatch","sw","replaceInstancesOfColor_withColor_ignoreAlphaWhenMatching_replaceAlphaOfOriginalColor","makeReferencingColor","referencingColor","docSymbols","instances","matchingSymbolInLib","importedSymbolMaster","parent","getTheme","librariesArray","getLibraries","filter","valid","enabled","sort","a","b","toLowerCase","pluginName","__command","pluginBundle","mainView","fiber","Async","createFiber","panel","createFloatingPanel","panelClose","standardWindowButton","NSWindowCloseButton","close","cleanup","contentView","mapSharedStyles","getImportableSwatchReferencesForDocument","_replaceSymbols","replaceSymbols","replaceSharedStyles","sharedLayerStyles","sharedTextStyles","replaceOverrides","reloadInspector","selection","mapSymbolsAndStyles","createButton","frame","NSView","setWantsLayer","setBackgroundColor","NSColor","colorWithCalibratedRed_green_blue_alpha","CGColorCreateGenericRGB","title","NSPanel","init","setFrame_display","setStyleMask","NSTexturedBackgroundWindowMask","NSTitledWindowMask","NSClosableWindowMask","NSFullSizeContentViewWindowMask","setLevel","NSFloatingWindowLevel","NSWindowMiniaturizeButton","setHidden","NSWindowZoomButton","makeKeyAndOrderFront","center","createHelpButton","NSHelpButtonBezelStyle","imagePath","imagePathDark","image","NSImageView","mask","NSImage","initByReferencingFile","urlForResourceNamed","path","setImage","setImageScaling","getLibraryPreview","source","artboardGroups","NSMutableArray","array","page","predicate","NSPredicate","predicateWithFormat","children","filteredArrayUsingPredicate","instance","addObject","libraryPreviewLayer","parentObject","relativeRect","rect","exportRequest","MSExportRequest","exportRequestsFromExportableLayer_inRect_useIDForName_","convertRect_toCoordinateSpace_","nil","firstObject","format","colorSpace","NSColorSpace","sRGBColorSpace","exporter","MSExporter","exporterForRequest_colorSpace_","imageRep","data","libraryPreviewImage","autorelease","addRepresentation","options","selected","x","arguments","y","rows","columns","buttonMatrixWidth","buttonCellWidth","buttonCell","NSButtonCell","setButtonType","NSRadioButton","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSRadioModeMatrix","setCellSize","NSMakeSize","cells","objectAtIndex","setTag","selectCellAtRow_column","view","NSScrollView","setHasVerticalScroller","colorDark","font","string","field","NSTextField","setStringValue","setFont","setBezeled","setEditable","setDrawsBackground","setLineBreakMode","NSLineBreakByTruncatingTail","setFlipped","panelGutter","leftColWidth","rightColPad","NSFont","boldSystemFontOfSize","systemFontOfSize"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","export default function googleAnalytics(\n  context,\n  category,\n  action,\n  label,\n  value\n) {\n  const trackingID = 'UA-128191866-1'\n  const uuidKey = 'google.analytics.uuid'\n  let url = 'https://www.google-analytics.com/collect?v=1'\n  let uuid = NSUserDefaults.standardUserDefaults().objectForKey(uuidKey)\n\n  if (!uuid) {\n    uuid = NSUUID.UUID().UUIDString()\n    NSUserDefaults.standardUserDefaults().setObject_forKey(uuid, uuidKey)\n  }\n\n  // Tracking ID\n  url += `&tid=${trackingID}`\n  // Source\n  url += `&ds=sketch${BCSketchInfo.shared().metadata().appVersion}`\n  // Client ID\n  url += `&cid=${uuid}`\n  // pageview, screenview, event, transaction, item, social, exception, timing\n  url += '&t=event'\n  // App Name\n  url += `&an=${encodeURI(context.plugin.name())}`\n  // App Version\n  url += `&av=${context.plugin.version()}`\n  // Event category\n  url += `&ec=${encodeURI(category)}`\n  // Event action\n  url += `&ea=${encodeURI(action)}`\n  // Event label\n  if (label) {\n    url += `&el=${encodeURI(label)}`\n  }\n  // Event value\n  if (value) {\n    url += `&ev=${encodeURI(value)}`\n  }\n\n  const session = NSURLSession.sharedSession();\n    const task = session.dataTaskWithURL(\n      NSURL.URLWithString(NSString.stringWithString(url))\n    )\n  task.resume()\n}\n","export default function (newSwatch) {\n\tlet newColor = MSColor.blackColor()\n\tnewColor.setSwatch(newSwatch.localSwatch())\n\treturn newColor\n}","export default function(swatchID, doc, librarySwatches) {\n\tlet currentSwatch = doc.swatchWithID(String(swatchID))\n\tif(currentSwatch === null){\n\t\treturn\n\t} else {\n\t\tlet newSwatch = librarySwatches.find(swatch => String(swatch.name()) === String(currentSwatch.name()));\n\t\treturn newSwatch\t\n\t}\n}","export default function (matchingSwatch, nativeLibrary) {\n\tif (matchingSwatch && nativeLibrary) {\n\t\tlet newSwatch = MSForeignSwatch.alloc().initWithOriginalObject_inLibrary(matchingSwatch, nativeLibrary)\n\t\treturn newSwatch\n\t}\n}","import replaceSelectedSharedStyles from './replace-selected-shared-styles'\nimport replaceSelectedSymbols from './replace-selected-symbols'\nimport replaceSelectedOverrides from './replace-selected-overrides'\n\nexport default function inspectSelection(\n  layers,\n  lookup,\n  documentSymbols,\n  documentLayerStyles,\n  documentTextStyles\n) {\n  layers.forEach((layer) => {\n  if (layer.sharedStyleId != null) {\n      replaceSelectedSharedStyles(\n        layer,\n        layer.sharedStyleId,\n        documentLayerStyles,\n        lookup.layer,\n        documentTextStyles,\n        lookup.text\n      )\n    } else {\n      if (layer.layers !== undefined) {\n        inspectSelection(\n          layer.layers,\n          lookup,\n          documentSymbols,\n          documentLayerStyles,\n          documentTextStyles\n        )\n      }\n      if (layer.layers === undefined) {\n        if (layer.type === 'SymbolInstance') {\n          replaceSelectedSymbols(layer, lookup.symbol, lookup.documentsymbol)\n        }\n        if (layer.overrides !== undefined) {\n          layer.overrides.forEach((overrides) => {\n            if (overrides.property === 'symbolID') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentSymbols,\n                lookup.symbol,\n                'symbolId'\n              )\n            }\n            if (overrides.property === 'layerStyle') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentLayerStyles,\n                lookup.layer,\n                'id'\n              )\n            }\n            if (overrides.property === 'textStyle') {\n              replaceSelectedOverrides(\n                overrides.value,\n                overrides,\n                documentTextStyles,\n                lookup.text,\n                'id'\n              )\n            }\n          })\n        } else if (layer.sharedStyleId !== null) {\n            replaceSelectedSharedStyles(\n              layer,\n              layer.sharedStyleId,\n              documentLayerStyles,\n              lookup.layer,\n              documentTextStyles,\n              lookup.text\n            )\n          }\n      }\n    }\n  })\n}\n","import sketch from 'sketch'\nimport settings from 'sketch/settings'\nimport googleAnalytics from './analytics'\nimport switchLibrary from './switch-library'\nimport switchSelection from './switch-selection'\nimport createFloatingPanel from './ui/create-floating-panel'\nimport createScrollView from './ui/create-scroll-view'\nimport createView from './ui/create-view'\nimport createButton from './ui/create-button'\nimport createImage from './ui/create-image'\nimport createHelpButton from './ui/create-help-button'\nimport createText from './ui/create-text'\nimport createDivider from './ui/create-divider'\nimport createLibraryPreview from './ui/create-library-preview'\nimport createRadioButtons from './ui/create-radio-buttons'\nimport replaceSelectedSwatches from './replace-selected-swatches'\n\n\nexport default function(context,panelStyles, theme, libraries) {\n\n  //Settings\n  let lastSelected = settings.sessionVariable('Selected')\n\n  let panelContent = createView(NSMakeRect(0,0,panelStyles.panelWidth,panelStyles.panelHeight - panelStyles.panelHeader))\n  let swapType = createRadioButtons(\n    ['Apply to selection', 'Apply to document'],\n    lastSelected\n  )\n  \n  let themesTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.sectionFont,'Libraries',NSMakeRect(20,40,100,18))\n  let optionsTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.sectionFont,'Options',NSMakeRect(20,334,100,18))\n  let scrollViewMask = createImage(theme,NSMakeRect(20,75,338,239),'scrollViewMask.png','scrollViewMaskDark.png')\n  let libraryList = createScrollView(theme,NSMakeRect(20,75,338,239))\n  \n  let addComponentsToPanel = [themesTitle,optionsTitle,swapType,libraryList,scrollViewMask].forEach(i => panelContent.addSubview(i))\n  let itemContent = createView(NSMakeRect(0,0,panelStyles.itemWidth,panelStyles.itemHeight * libraries.length))\n  let count = 0\n  \n  libraries.forEach(function(library,i){\n    let lib = library\n    let nativeLibrary = lib.sketchObject\n    let nativeLibraryLayers = library.sketchObject.document().documentData().pages()\n    let listItem = createView(NSMakeRect(0,panelStyles.itemHeight*count,panelStyles.itemWidth,panelStyles.itemHeight))\n    let imageMask = createImage(theme,NSMakeRect(20,15,40,40),'mask.png','maskDark.png')\n    let imageArea = createLibraryPreview(theme,nativeLibraryLayers,NSMakeRect(20,15,40,40))\n    let artboardSubtitle = createText(theme,panelStyles.darkTextGrey,panelStyles.lightTextGrey,panelStyles.subtitleFont,String(library.libraryType),NSMakeRect(panelStyles.rightColX,38,panelStyles.rightColWidth-88,14))\n    let artboardTitle = createText(theme,panelStyles.blackText,panelStyles.whiteText,panelStyles.titleFont,String(library.name),NSMakeRect(panelStyles.rightColX,20,panelStyles.rightColWidth-88,18))\n    let divider = createDivider(theme,NSMakeRect(20,panelStyles.itemHeight - 1,panelStyles.itemWidth - 40,0.5))\n    let librariesController = AppController.sharedInstance().librariesController()\n\n    let button = NSButton.alloc().initWithFrame(NSMakeRect(237,18,88,36)) \n    button.setTitle('Swap')\n    button.setBezelStyle(NSRoundedBezelStyle)\n    button.setAction('callAction:')\n\n    button.setCOSJSTargetFunction(function() {\n    let doc = sketch.getSelectedDocument()\n    let nativeLibSwatches = nativeLibrary.document().documentData().allSwatches()     \n\n      if (swapType.selectedCell().tag() === 0) {\n        settings.setSessionVariable('Selected', 0)\n        let selectedLayers = doc.selectedLayers\n        \n        \n        if (selectedLayers.length < 1) {\n          sketch.UI.message(`Select a layer`)\n        } else {    \n          \n          switchSelection(doc, lib)\n          replaceSelectedSwatches(selectedLayers, nativeLibSwatches, nativeLibrary, librariesController)          \n          googleAnalytics(context, 'Replace selected with', lib.name, 'Library')\n          sketch.UI.message(`🎉 🎈 🙌🏼  Applied theme from ${lib.name}  🙌🏼 🎉 🎈`)\n        }\n      }\n\n      if (swapType.selectedCell().tag() === 1) {\n        settings.setSessionVariable('Selected', 1)\n        let selectedPages = doc.pages\n        switchLibrary(doc, lib)\n        replaceSelectedSwatches(selectedPages, nativeLibSwatches, nativeLibrary, librariesController)          \n        googleAnalytics(context, 'Replace document with', lib.name, 'Library')\n        sketch.UI.message(`🎉 🎈 🙌🏼  Applied theme from ${lib.name}  🙌🏼 🎉 🎈`)     \n      }\n    })\n    \n    let addComponentsToList = [imageArea,imageMask,artboardSubtitle,artboardTitle,button,divider].forEach(i => listItem.addSubview(i))\n    \n    itemContent.addSubview(listItem)\n\n    count++\n  })\n\n  libraryList.setDocumentView(itemContent)\n\n  return panelContent\n}","export function createLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.name] = s\n    return prev\n  }, {})\n}\n\nexport default (document, library) => ({\n  layer: createLookup(\n    library.getImportableLayerStyleReferencesForDocument(document)\n  ),\n  text: createLookup(\n    library.getImportableTextStyleReferencesForDocument(document)\n  ),\n})\n","export function createIdLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.symbolId] = s\n    return prev\n  }, {})\n}\n\nexport function createLookup(styles) {\n  return styles.reduce((prev, s) => {\n    // eslint-disable-next-line no-param-reassign\n    prev[s.name] = s\n    return prev\n  }, {})\n}\n\nexport default (document, library) => ({\n  layer: createLookup(\n    library.getImportableLayerStyleReferencesForDocument(document)\n  ),\n  text: createLookup(\n    library.getImportableTextStyleReferencesForDocument(document)\n  ),\n  symbol: createLookup(\n    library.getImportableSymbolReferencesForDocument(document)\n  ),\n  documentsymbol: createIdLookup(document.getSymbols()),\n})\n","export default (\n  docSymbolInstances,\n  { symbolsMap, layerStylesMap, textStylesMap }\n) => {\n  docSymbolInstances.forEach(symbolInstance => {\n    symbolInstance.overrides.forEach(override => {\n      if (override.property === 'symbolID' && symbolsMap[override.value]) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = symbolsMap[override.value]\n      }\n      if (\n        override.property === 'layerStyle' &&\n        layerStylesMap[override.value]\n      ) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = layerStylesMap[override.value]\n      }\n      if (override.property === 'textStyle' && textStylesMap[override.value]) {\n        // eslint-disable-next-line no-param-reassign\n        override.value = textStylesMap[override.value]\n      }\n    })\n  })\n}\n","export default function(\n  overrideValue,\n  overrides,\n  documentStyles,\n  libraryStyles,\n  key\n) {\n  documentStyles.forEach((style) => {\n    if (style[key] === overrideValue) {\n      const styleToImport = libraryStyles[style.name]\n      if (styleToImport) {\n        const imported = styleToImport.import()\n        const importedId = imported[key]\n        overrides.value = importedId\n      }\n    }\n  })\n}\n","export default function(\n  layer,\n  sharedStyleId,\n  documentLayerStyles,\n  libraryLayerStyles,\n  documentTextStyles,\n  libraryTextStyles\n) {\n  documentLayerStyles.forEach((style) => {\n    if (style.id === sharedStyleId) {\n      const styleToImport = libraryLayerStyles[style.name]\n\n      if (styleToImport) {\n        const importedStyle = styleToImport.import()\n        const importedStyleId = importedStyle.id\n        layer.sharedStyleId = importedStyleId\n        layer.style.syncWithSharedStyle(importedStyle)\n      }\n    }\n  })\n  documentTextStyles.forEach((style) => {\n    if (style.id === sharedStyleId) {\n      const styleToImport = libraryTextStyles[style.name]\n\n      if (styleToImport) {\n        const importedStyle = styleToImport.import()\n        const importedStyleId = importedStyle.id\n        layer.sharedStyleId = importedStyleId\n        layer.style.syncWithSharedStyle(importedStyle)\n      }\n    }\n  })\n}\n","import { toArray } from 'util'\nimport sketch from 'sketch'\nimport replaceSelectedSwatches from './replace-selected-swatches'\nimport getMatchingSwatch from './get-matching-swatch'\nimport importSwatchFromLibrary from './import-swatch-from-library'\nimport createColorWithSwatch from './create-color-with-swatch'\nimport replaceSelectedSymbolSwatches from './replace-selected-symbol-swatches'\n\nexport default function (docLayers, nativeLibSwatches, nativeLibrary, librariesController) {\n\tdocLayers.forEach((layer) => {\n\t\tlet nativeLayer = layer.sketchObject\n\t\tswitch (String(nativeLayer.class())) {\n\t\t\tcase \"MSTextLayer\":\n\t\t\t\tif (String(nativeLayer.style().textStyle().encodedAttributes().MSAttributedStringColorAttribute.swatchID()) != 'null') {\n\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(nativeLayer.style().textStyle().encodedAttributes().MSAttributedStringColorAttribute.swatchID(), context.document.documentData(), nativeLibSwatches)\n\t\t\t\t\tif (matchingSwatch) {\n\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\tlet newColor = createColorWithSwatch(newSwatch)\n\t\t\t\t\t\tnativeLayer.setTextColor(newColor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (nativeLayer.style().fills().length > 0) {\n\t\t\t\t\tnativeLayer.style().fills().forEach(function (fill) {\n\t\t\t\t\t\tif (String(fill.color().swatchID()) != 'null') {\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(fill.color().swatchID(), context.document.documentData(), nativeLibSwatches)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tfill.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (nativeLayer.style().borders().length > 0) {\n\t\t\t\t\tnativeLayer.style().borders().forEach(function (border) {\n\t\t\t\t\t\tif (String(border.color().swatchID()) != 'null') {\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(border.color().swatchID(), context.document.documentData(), nativeLibSwatches)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tborder.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"MSSymbolInstance\":\n\t\t\t\tlet symbolMaster = nativeLayer.symbolMaster()\n\t\t\t\tlet overrides = toArray(nativeLayer.overridePoints())\n\n\t\t\t\tif (overrides.length > 0) {\n\t\t\t\t\toverrides.forEach(function (override) {\n\t\t\t\t\t\treplaceSelectedSymbolSwatches(override, nativeLayer, symbolMaster, nativeLibSwatches, nativeLibrary, librariesController)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (nativeLayer.style().fills().length > 0) {\n\t\t\t\t\tnativeLayer.style().fills().forEach(function (fill) {\n\t\t\t\t\t\tif (String(fill.color().swatchID()) != 'null') {\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(fill.color().swatchID(), context.document.documentData(), nativeLibSwatches)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tfill.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (nativeLayer.style().borders().length > 0) {\n\t\t\t\t\tnativeLayer.style().borders().forEach(function (border) {\n\t\t\t\t\t\tif (String(border.color().swatchID()) != 'null') {\n\t\t\t\t\t\t\tlet matchingSwatch = getMatchingSwatch(border.color().swatchID(), context.document.documentData(), nativeLibSwatches)\n\t\t\t\t\t\t\tlet newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n\t\t\t\t\t\t\tborder.color().setSwatch(newSwatch.localSwatch())\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t// Iterate through layers array\n\t\tif (typeof nativeLayer.layers === 'function') {\n\t\t\treplaceSelectedSwatches(layer.layers, nativeLibSwatches, nativeLibrary, librariesController)\n\t\t}\n\t})\n}","import { toArray } from 'util'\nimport sketch from 'sketch'\nimport getMatchingSwatch from './get-matching-swatch'\nimport importSwatchFromLibrary from './import-swatch-from-library'\nimport createColorWithSwatch from './create-color-with-swatch'\nimport replaceSelectedSymbolSwatches from './replace-selected-symbol-swatches'\n\nexport default function (override, nativeLayer, symbolMaster, nativeLibSwatches, nativeLibrary, librariesController) {\n\n  if (String(override.class()) == 'MSColor' || String(override.class()) == 'MSImmutableColor') {\n    if (override.hasOverride() === 0) {\n      let currentSwatchID = override.currentValue().swatchID()\n      // If there is a swatch with same ID in current document\n      let match = context.document.documentData().swatchWithID(String(currentSwatchID))\n      if (match == null) {\n        let nativeLibFromSymbol = librariesController.libraryForShareableObject(symbolMaster)\n        let overrideValue = override.overridePoint()\n        let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), nativeLibFromSymbol.document().documentData(), nativeLibSwatches)\n\n        if (matchingSwatch === undefined) {\n          let pe = nativeLibFromSymbol.document().documentData().allSymbols()\n          pe.forEach(function (p) {\n            if (librariesController.libraryForShareableObject(p) != null) {\n              let le = librariesController.libraryForShareableObject(p)\n              let overrides = toArray(MSAvailableOverride.flattenAvailableOverrides(p.availableOverrides()))\n\n              overrides.forEach(function (m) {\n                if (String(m.currentValue().class()) == 'MSColor' || String(m.currentValue().class()) == 'MSImmutableColor') {\n                  let matchingSwatch = getMatchingSwatch(m.currentValue().swatchID(), le.document().documentData(), nativeLibSwatches)\n                  if (matchingSwatch === undefined) {\n                    replaceSelectedSymbolSwatches(override, nativeLayer, p, nativeLibSwatches, le, librariesController)\n                  } else {\n                    let newSwatch = importSwatchFromLibrary(matchingSwatch, le)\n                    let newColor = createColorWithSwatch(newSwatch)\n                    nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n                  }\n                }\n              })\n            }\n          })\n\n        } else {\n          let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n          let newColor = createColorWithSwatch(newSwatch)\n          nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n        }\n      } else {\n        let overrideValue = override.overridePoint()\n        let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), context.document.documentData(), nativeLibSwatches)\n        let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n        let newColor = createColorWithSwatch(newSwatch)\n        nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n      }\n    } else {\n      let overrideValue = override.overridePoint()\n      let matchingSwatch = getMatchingSwatch(override.currentValue().swatchID(), context.document.documentData(), nativeLibSwatches)\n      let newSwatch = importSwatchFromLibrary(matchingSwatch, nativeLibrary)\n      let newColor = createColorWithSwatch(newSwatch)\n      nativeLayer.setValue_forOverridePoint(newColor, overrideValue)\n    }\n  }\n}","export default function(selectedSymbols, librarySymbols, documentSymbols) {\n  const symbolMasterName = documentSymbols[selectedSymbols.symbolId]\n\n  if (symbolMasterName) {\n    const symbolToImport = librarySymbols[symbolMasterName.name]\n    if (symbolToImport) {\n      const imported = symbolToImport.import()\n      selectedSymbols.symbolId = imported.symbolId\n      selectedSymbols.name = imported.name\n    }\n  }\n}\n","export default function(libraryStyles, lookup, library) {\n  const map = {}\n  libraryStyles.forEach(librarySharedStyle => {\n    const currentSharedStyle = lookup[librarySharedStyle.name]\n    if (currentSharedStyle) {\n      const imported = currentSharedStyle.import()\n      // if the shared style is coming from a library, then we just want to:\n      // - import the matching style\n      // - update all the instances to point to the imported style\n      // - map the current style to the imported one\n      if (librarySharedStyle.getLibrary()) {\n        map[librarySharedStyle.id] = imported.id\n        librarySharedStyle.getAllInstancesLayers().forEach(l => {\n          // eslint-disable-next-line no-param-reassign\n          l.sharedStyleId = imported.id\n          l.style.syncWithSharedStyle(imported)\n        })\n      } else {\n        // if the shared style is local, then we just want to:\n        // - import the matching style to update the local one\n        // - update all the instances to point to the imported style\n        librarySharedStyle.style = imported.style\n        librarySharedStyle\n          .getAllInstances()\n          .forEach(s => s.syncWithSharedStyle(librarySharedStyle))\n      }\n    }\n  })\n  return map\n}\n","export default function(docData,librarySwatches,docSwatches) {\n  docSwatches.forEach(swatch => {\n    let importableSwatch = librarySwatches.find(sw => sw.name == swatch.name())\n    if (!importableSwatch) {\n      return\n    } else {\n      let newSwatch = importableSwatch.import()\n      docData\n            .replaceInstancesOfColor_withColor_ignoreAlphaWhenMatching_replaceAlphaOfOriginalColor(\n            swatch.makeReferencingColor(),\n            newSwatch.referencingColor,\n            false,\n            false)\n    }\n  })\n}","export default function(document, library) {\n  const docSymbols = document.getSymbols()\n  let docSymbolInstances = []\n  const symbolsMap = {}\n\n  if (!docSymbols.length) {\n    return { symbolsMap, docSymbolInstances }\n  }\n\n  const librarySymbols = library.getImportableSymbolReferencesForDocument(\n    document\n  )\n\n  docSymbols.forEach(symbolMaster => {\n    const instances = symbolMaster.getAllInstances()\n    docSymbolInstances = docSymbolInstances.concat(instances)\n\n    const matchingSymbolInLib = librarySymbols.find(\n      s => s.name === symbolMaster.name\n    )\n    if (!matchingSymbolInLib) {\n      return\n    }\n    // import the matching symbol\n    const importedSymbolMaster = matchingSymbolInLib.import()\n\n    // store the mapping so that we can update the overrides later on\n    symbolsMap[symbolMaster.symbolId] = importedSymbolMaster.symbolId\n\n    // update all the instances\n    instances.forEach(symbolInstance => {\n      // eslint-disable-next-line no-param-reassign\n      symbolInstance.symbolId = importedSymbolMaster.symbolId\n      // eslint-disable-next-line no-param-reassign\n      symbolInstance.name = importedSymbolMaster.name\n    })\n\n    // now that we replaced all the instances, we remove the master\n    // eslint-disable-next-line no-param-reassign\n    symbolMaster.parent = null\n  })\n\n  return { symbolsMap, docSymbolInstances }\n}\n","import sketch from 'sketch'\nimport googleAnalytics from './analytics'\nimport createFloatingPanel from './ui/create-floating-panel'\nimport styles from './ui/styles'\nimport mainView from './main-view'\n\nconst theme = sketch.UI.getTheme()\nconst librariesArray = sketch.getLibraries().filter(l => l.valid && l.enabled)\nconst libraries = librariesArray.sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase()) ? 1 : -1)\nconst pluginName = __command.pluginBundle().name()\n\n\nexport default function(context) {\n\n  let panelStyles = styles()\n  let panelContent = mainView(context,panelStyles,theme,libraries)\n\n  let fiber = sketch.Async.createFiber()\n  let panel = createFloatingPanel(theme,pluginName,NSMakeRect(0,0,panelStyles.panelWidth,panelStyles.panelHeight))\n  let panelClose = panel.standardWindowButton(NSWindowCloseButton)\n  \n  panelClose.setCOSJSTargetFunction(function() {\n    panel.close()\n    fiber.cleanup()\n  })\n\n  panel.contentView().addSubview(panelContent)\n  googleAnalytics(context, 'Open Camilo', 'Alert', 'UI')\n}","import mapSharedStyles from './map-shared-styles'\nimport replaceSymbols from './replace-symbols'\nimport replaceOverrides from './replace-overrides'\nimport replaceSharedStyles from './replace-shared-styles'\nimport replaceSwatches from './replace-swatches'\n\nexport default function(document, library) {\n  const lookup = mapSharedStyles(document, library)\n  const librarySwatches = library.getImportableSwatchReferencesForDocument(document)\n\n  // replace the symbols\n  const { symbolsMap, docSymbolInstances } = replaceSymbols(document, library)\n\n  // replace the styles\n  const layerStylesMap = replaceSharedStyles(\n    document.sharedLayerStyles,\n    lookup.layer,\n    library\n  )\n  // replace the textStyles\n  const textStylesMap = replaceSharedStyles(\n    document.sharedTextStyles,\n    lookup.text,\n    library\n  )\n  // replace the overrides\n  replaceOverrides(docSymbolInstances, {\n    symbolsMap,\n    layerStylesMap,\n    textStylesMap\n  })\n\n  // reload the inspector to make sure we show the latest changes\n  document.sketchObject.reloadInspector()\n}\n","import mapSymbolsAndStyles from './map-symbols-and-styles'\nimport inspectSelection from './inspect-selection'\n\nexport default function(document, library) {\n  const selection = document.selectedLayers.layers\n  const lookup = mapSymbolsAndStyles(document, library)\n  const docSymbols = document.getSymbols()\n\n  inspectSelection(\n    selection,\n    lookup,\n    docSymbols,\n    document.sharedLayerStyles,\n    document.sharedTextStyles\n  )\n\n  // reload the inspector to make sure we show the latest changes\n  document.sketchObject.reloadInspector()\n}\n","export default function createButton(label,frame) {\n\tvar button = NSButton.alloc().initWithFrame(frame)\n\tbutton.setTitle(label)\n\tbutton.setBezelStyle(NSRoundedBezelStyle)\n\tbutton.setAction('callAction:')\n\t\n\treturn button\n}","export default function createDivider(theme,frame) {\n\tvar divider = NSView.alloc().initWithFrame(frame);\n\n\tdivider.setWantsLayer(1);\n\tif (theme === 'dark') {\n  divider.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.22,0.22,0.22,1));\n\t} else {\n  divider.layer().setBackgroundColor(CGColorCreateGenericRGB(204/255,204/255,204/255,1.0));\n\t}\n\t\n\n\treturn divider;\n}","export default function createFloatingPanel(theme,title,frame) {\n\tvar panel = NSPanel.alloc().init();\n\n\tpanel.setTitle(title);\n\tpanel.setFrame_display(frame,true);\n\tpanel.setStyleMask(NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask | NSFullSizeContentViewWindowMask);\n\tif (theme === 'dark') {\n  panel.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.2,0.2,0.2,1));\n\t} else {\n  panel.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,1));\n\t}\n\tpanel.setLevel(NSFloatingWindowLevel);\n\tpanel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n\tpanel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n\tpanel.makeKeyAndOrderFront(null);\n\tpanel.center();\n\n\treturn panel;\n}","export default function createHelpButton(label,frame) {\n\t\n\tvar button = NSButton.alloc().initWithFrame(frame)\n\t\n\tbutton.setTitle(label)\n\tbutton.setBezelStyle(NSHelpButtonBezelStyle)\n\tbutton.setAction('callAction:')\n\t\n\treturn button\n}","export default function createImage(theme,frame,imagePath,imagePathDark) {\n \n  var image = NSImageView.alloc().initWithFrame(frame);\n  \n  if (theme === 'dark') {\n  let mask = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(String(imagePathDark)).path())\n    image.setImage(mask);\n    image.setImageScaling(0)\n\t} else {\n  let mask = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(String(imagePath)).path())\n    image.setImage(mask);\n    image.setImageScaling(0)\n\t}\n  return image\n}\n","import createImage from './create-image'\n\nexport function getLibraryPreview(source) {\n\tvar artboardGroups = NSMutableArray.array();\n\tsource.forEach(function (page) {\n\t\tvar predicate = NSPredicate.predicateWithFormat('className == %@ && name == %@', 'MSArtboardGroup', 'Library Preview');\n\t\tpage.children().filteredArrayUsingPredicate(predicate).forEach(instance => artboardGroups.addObject(instance));\n\t});\n\tif (artboardGroups.length > 0) {\n\t\treturn artboardGroups[0];\n\t}\n}\n\nexport default function createLibraryPreview(theme, source, frame) {\n\tlet image = NSImageView.alloc().initWithFrame(frame)\n\n\tlet libraryPreviewLayer = getLibraryPreview(source)\n\n\tif (libraryPreviewLayer != undefined || null) {\n\t\tlet parent = libraryPreviewLayer.parentObject()\n\t\tlet relativeRect = libraryPreviewLayer.frame().rect()\n\n\t\tlet exportRequest = MSExportRequest.exportRequestsFromExportableLayer_inRect_useIDForName_(\n\t\t\tlibraryPreviewLayer,\n\t\t\tparent.convertRect_toCoordinateSpace_(relativeRect, nil),\n\t\t\tfalse\n\t\t).firstObject();\n\n\t\texportRequest.format = 'png';\n\n\t\tlet colorSpace = NSColorSpace.sRGBColorSpace();\n\t\tlet exporter = MSExporter.exporterForRequest_colorSpace_(exportRequest, colorSpace);\n\t\tlet imageRep = exporter.data();\n\n\t\tlet libraryPreviewImage = NSImage.alloc().init().autorelease();\n\t\tlibraryPreviewImage.addRepresentation(imageRep)\n\t\timage.setImage(libraryPreviewImage)\n\t\timage.setImageScaling(3)\n\n\t\treturn image;\n\n\t} else {\n\n\t\tlet libraryPreviewImage = createImage(theme, frame, 'library.png', 'library.png');\n\t\treturn libraryPreviewImage;\n\t}\n}\n\n","export default function createRadioButtons(options, selected, format, x = 20, y = 375) {\n  let rows = options.length;\n    let columns = 1;\n    let buttonMatrixWidth = 300;\n    let buttonCellWidth = buttonMatrixWidth;\n\n  if (format && format !== 0) {\n    rows = options.length / 2\n    columns = 2\n    buttonMatrixWidth = 300\n    buttonCellWidth = buttonMatrixWidth / columns\n  }\n\n  const buttonCell = NSButtonCell.alloc().init()\n\n  buttonCell.setButtonType(NSRadioButton)\n\n  const buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(\n    NSMakeRect(x, y, buttonMatrixWidth, rows * 24),\n    NSRadioModeMatrix,\n    buttonCell,\n    rows,\n    columns\n  )\n\n  buttonMatrix.setCellSize(NSMakeSize(buttonCellWidth, 24))\n\n  let i = 0\n\n  for (i = 0; i < options.length; i +=1 ) {\n    buttonMatrix\n      .cells()\n      .objectAtIndex(i)\n      .setTitle(options[i])\n    buttonMatrix\n      .cells()\n      .objectAtIndex(i)\n      .setTag(i)\n  }\n\n  buttonMatrix.selectCellAtRow_column(selected, 0)\n\n  return buttonMatrix\n}\n","export default function createScrollView(theme,frame) {\n\tvar view = NSScrollView.alloc().initWithFrame(frame)\n\tif (theme === 'dark') {\n  view.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.17,0.17,0.17,1))\n\t} else {\n  view.setBackgroundColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0.95,0.95,0.95,1))\n\t}\n\t\n\tview.setHasVerticalScroller(1)\n\t\n\treturn view\n}\n","export default function createText(theme,color,colorDark,font,string,frame) {\n\t\n\tvar field = NSTextField.alloc().initWithFrame(frame)\n\n\tfield.setStringValue(string)\n\tfield.setFont(font)\n\tfield.setBezeled(0)\n\tfield.setEditable(0)\n\tfield.setDrawsBackground(false)\n\tfield.setLineBreakMode(NSLineBreakByTruncatingTail);\n\n\t//Themes colors\n\tif (theme === 'dark') {\n  field.setTextColor(colorDark)\n\t} else {\n  field.setTextColor(color)\n\t}\n\n\treturn field\n}","export default function createView(frame) {\n\tvar view = NSView.alloc().initWithFrame(frame);\n\t\n\n\tview.setFlipped(1);\n\n\treturn view;\n}","export default function styles() {\n\tlet styles = {\n\n\t\t// Panel dimens\n\t\tpanelHeader: 20,\n\t\tpanelHeight: 468,\n\t\tpanelWidth: 378,\n\t\tpanelGutter: 15,\n\n\t\t// List\n\t\titemHeight: 72,\n\t\titemWidth: 338,\n\t\tleftColWidth: 60,\n\t\trightColPad: 8,\n\t\trightColWidth: 270, //itemWidth - leftColWidth - rightColPad\n\t\trightColX: 68, //rightColPad + leftColWidth\n\n\t\t// Fonts\n\t\tsectionFont: NSFont.boldSystemFontOfSize(15),\n\t\ttitleFont: NSFont.boldSystemFontOfSize(12),\n\t\tsubtitleFont: NSFont.systemFontOfSize(10),\n\n\t\t//Colors\n\t\tdarkTextGrey: NSColor.colorWithCalibratedRed_green_blue_alpha(0,0,0,0.4),\n\t\tlightTextGrey: NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,0.4),\n\t\tblackText: NSColor.colorWithCalibratedRed_green_blue_alpha(0,0,0,1),\n\t\twhiteText: NSColor.colorWithCalibratedRed_green_blue_alpha(1,1,1,1),\n\t}\n\n\treturn styles\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"util\");"],"sourceRoot":""}